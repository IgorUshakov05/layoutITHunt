<% 
var minPrice = vacancy.price.minPrice;
var maxPrice = vacancy.price.maxPrice;
var agreement = vacancy.price.agreement;
%>
<!DOCTYPE html>
<html lang="ru">
<head>
    <link rel="shortcut icon" href="/assets/icon.svg" type="image/x-icon">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Описание вакансии <%- vacancy.special %> разработчика в компании <%- from.name|| from.title %>. Зарплата: <%= minPrice ? (minPrice.toLocaleString('ru-RU') + (maxPrice ? ' - ' + maxPrice.toLocaleString('ru-RU') : '')) : 'Договорная' %>.">
    <meta name="keywords" content="вакансия, <%- vacancy.special %> разработчик, работа, <%- from.name || from.title%>, программирование, разработка, зарплата">
    <meta name="author" content="<%- from.name|| from.title %>">
    <meta property="og:title" content="Вакансия <%- vacancy.special %> разработчика в компании <%- from.name ||from.title  %>">
    <meta property="og:description" content="Подробнее о вакансии <%- vacancy.special %> разработчика в компании <%- from.name || from.title %>. Зарплата: <%= minPrice ? (minPrice.toLocaleString('ru-RU') + (maxPrice ? ' - ' + maxPrice.toLocaleString('ru-RU') : '')) : 'Договорная' %>. Узнайте о требованиях и условиях работы.">
    <meta property="og:image" content="https://q72v1zh5-3001.euw.devtunnels.ms/preview/user?name=John&lastname=Doe&role=admin&avatar=https://masterpiecer-images.s3.yandex.net/2e2665fe6d1111ee89c3f6f8c1ba65ae:upscaled&location=New%20York&premium= &special=<%-from.special%>">
    <meta property="og:url" content="/<%= vacancy.id %>">
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="<%- from.name %>">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Вакансия <%- vacancy.special %> разработчика в компании <%- from.name ||from.title  %>">
    <meta name="twitter:description" content="Подробнее о вакансии <%- vacancy.special %> разработчика в компании <%- from.name %>. Зарплата: <%= minPrice ? (minPrice.toLocaleString('ru-RU') + (maxPrice ? ' - ' + maxPrice.toLocaleString('ru-RU') : '')) : 'Договорная' %>. Узнайте о требованиях и условиях работы.">
    <link rel="stylesheet" href="/style.css">
    <script src="/js/jquery.js"></script>
    <title>Вакансия <%- vacancy.special %> от <%- from.name || from.title %> <%-from.surname%></title>
</head>
<body>
    <%- include('./header.ejs', { isLoggedIn, active: 'profile', id,chat:chatList}) %>
<%let exp = vacancy.experience === "OneTwo"?'Опыт 0-2 года':vacancy.experience==="ThreeFour"?"Опыт 3-5 лет":vacancy.experience==="SixEight"?"Опыт 6-8 лет":vacancy.experience==="EightPlus"?"Опыт 8+ лет":'Без опыта'%>

<main class="main">
    <div class="twoBlocks">
        <div noindex class="personalInfo noShadow">
            <div class="boxShadow">

            <div class="titleCompanyAndPhoto">
                <div class="logoCompany">
                    <img src="<%- from.avatar %>" width="41" height="41" alt="Логотип компании">
                </div>
                <h3><%-from.name || from.title%> <%-from.surname%></h3>
            </div>
<p class="descriptionCompanyInVacansy"><%-from.description%></p>
<div class="showAllVacansy">
    <a href="/<%-from.INN?`company/${from.INN}`:from.id %>">
        <span class="seeAllVacansy">Посмотреть все вакансии</span>
    </a>
</div>
</div>
<div class="toMoreVacansy">
    <a class="toMoreVacansyA" href="/<%-from.INN?`company/${from.INN}`:from.id %>">
        <p>Посмотреть все вакансии</p>
        <div class="toArrow">
            <svg width="18" height="12" viewBox="0 0 18 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M0 6H17" stroke="#5412E0" stroke-width="0.714286"/>
                <path d="M12.5 1L17.5 6L12.5 11" stroke="#5412E0" stroke-width="0.714286"/>
                </svg>
                
        </div>
    </a>
</div>     
</div>

    <div class="MoreInfo">
        <div class="oneCard">
            <div class="topInfoVacancy">
                <h1 class="titleVacansy"><%= vacancy.special %></h1>
                <h2>
    <span class="priceItem">
        <% if (minPrice) { %>
            <% if (!maxPrice) { %> от <% } %>
            <%= minPrice.toLocaleString("no-NO") %>
            <span class="p">Ꝑ</span>
        <% } %>
        <% if (minPrice && maxPrice) { %> - <% } %>
        <% if (maxPrice) { %>
            <% if (!minPrice) { %> до <% } %>
            <%= maxPrice.toLocaleString("no-NO") %>
            <span class="p">Ꝑ</span>
        <% } %>
    </span>
    <% if (agreement &&(!maxPrice && !minPrice)) { %>
    <span>Договорная</span>
<% } %>
</h2>

            </div>
            <%if(from.city) {%>
            <a href="https://www.google.com/maps/search/<%-(from.city)%>" target="_blank">
                <h3 style="margin-top:0px;display: flex; align-items:center;"><svg class="methodJob" width="14" height="19" viewBox="0 0 14 19" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M7 0C10.866 0 14 2.87926 14 6.43125C14 12.2311 7 18.375 7 18.375C7 18.375 0 12.2827 0 6.43125C0 2.87926 3.134 0 7 0Z" fill="#5412E0"/>                 
                    <path d="M7 10.5C8.933 10.5 10.5 8.93303 10.5 7.00003C10.5 5.06703 8.933 3.50003 7 3.50003C5.067 3.50003 3.5 5.06703 3.5 7.00003C3.5 8.93303 5.067 10.5 7 10.5Z" fill="white"/>
                </svg>
                <span style="margin-left: 5px;" class="methodJob"><%-from.city.split(',').pop().trim()%></span></h3>
            </a>
            <%}%>
            <div class="stackForJob" style="margin-top:5px;">
                <ul class="listStacks">
                    
                     <li class="abilityItem">
                        <h5 class="ability"><%= exp%></h5>
                    </li>
                    <%vacancy.skills.forEach(skill => {%>
                    <li class="abilityItem">
                        <h5 class="ability"><%= skill.title%></h5>
                    </li>
                    <%})%>
                </ul>
            </div>
            <div class="descriptionVacansyItem">
                <h4 class="descriptionVacansyItemText">
                    <pre class="descriptionVacansyProfilePRE"><%- vacancy.description.replace('<script>', ' ') %></pre>
                </h4>


                </div>
                <div class="listMethods">
                    <%vacancy.typeWork.forEach(element => {%>
                        <%if(element.title === 'Офисная' && from.city) {%>
                                <a href="https://www.google.com/maps/search/<%-(from.city)%>" class="itemMethod"><%-element.title%></a>
                            <%} else {%>
                                <span class="itemMethod"><%-element.title%></span>
                        <%}%>
                    <%});%>
                </div>
            <div class="buttonsVacant">
                <a href="/vacancies">Вакансии</a>
                <%if(isLoggedIn) {%>
                    <button id="addToFavorites" class="<%-isFav?'Infavorites addingFavorite': 'Infavorites'%>">В избранное</button>
                <%} else {%>
                    <a href="/login" style="margin-right: 0;" class="<%-isFav?'Infavorites addingFavorite': 'Infavorites'%>">В избранное</a>
                    <%}%>
            </div>
        </div>
        <div class="oneCard twoCard">
        <span class="sendBid">Отправьте заявку</span>

            <form action="/sendBid" method="post">
            <span class="sendBid sendBidTwo">Отправьте сообщение работодателю описав свои навыки и опыт работы</span>
            <textarea maxlength="1200" class="textareaTwoCard" placeholder="Введите текст" name="message" id="message" cols="30" rows="10"></textarea>
            <div class="sendBidButtonDiv">
                <button class="sendBidButton" type="submit">Откликнуться</button>
            </div>
        </form>
        </div>
    </div>
</main>

<%- include('./footer.ejs') %>
<script src="/js/header.js"></script>
<script src="/js/methods.js"></script>
</body>
</html>