<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Найдите работу или предложите её в IT-сфере с помощью нашего сайта. Мы предлагаем широкий выбор вакансий для различных специализаций."
    />
    <meta
      name="keywords"
      content="IT, работа, вакансии, поиск работы, WebHunt, специалисты, программист, разработчик, тестировщик, веб-дизайнер"
    />
    <meta name="robots" content="index, follow" />
    <link rel="shortcut icon" href="/assets/icon.svg" type="image/x-icon" />
    <meta name="author" content="WebHunt" />
    <link rel="stylesheet" href="/style.css" />
    <script src="/js/jquery.js"></script>
    <title>WebHunt - Специалисты</title>
  </head>
  <body>
    <%- include('./header.ejs', { isLoggedIn, active:
    'specialists',chat:chatList}) %>

    <main class="main">
      <div class="twoBlocks">
        <div noindex class="personalInfo filterAlways">
          <div class="openFilter">
            <div class="picFilter">
              <svg
                width="20"
                height="16"
                viewBox="0 0 20 16"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M1 2.37622H19.2179"
                  stroke="black"
                  stroke-width="0.554457"
                  stroke-linecap="round"
                />
                <circle cx="12.8811" cy="2.37624" r="2.37624" fill="#5412E0" />
                <path
                  d="M1 13.4655H19.2179"
                  stroke="black"
                  stroke-width="0.554457"
                  stroke-linecap="round"
                />
                <circle cx="12.8811" cy="13.6237" r="2.37624" fill="#5412E0" />
                <path
                  d="M19.2178 7.9209L0.999909 7.9209"
                  stroke="black"
                  stroke-width="0.554457"
                  stroke-linecap="round"
                />
                <circle
                  cx="5.75242"
                  cy="8.0792"
                  r="2.37624"
                  transform="rotate(-180 5.75242 8.0792)"
                  fill="#5412E0"
                />
              </svg>
            </div>
            <p style="margin-left: 10px; font-size: 13px; margin-bottom: 2px">
              Закрыть фильтр
            </p>
          </div>
          <div class="filt">
            <div class="specialisationSelect FirsSpec">
              <h1>Фамилия Имя</h1>
              <div class="searchSpecialist">
                <input
                  type="text"
                  placeholder="Ушаков Игорь"
                  id="firstAndLastName"
                  class="descrtopSearchDesctop"
                />
              </div>
            </div>
            <div class="specialisationSelect">
              <h1>Специализация</h1>
              <div class="searchSpecialist">
                <div class="allSpecial"></div>

                <input
                  type="text"
                  placeholder="Frontend"
                  id="specialization"
                  class="descrtopSearchDesctop"
                />
                <div class="ParentlistSpecial">
                  <ul class="listSpecialMy">
                    <li onclick="select('Аналитик')">
                      <label>Аналитик</label>
                    </li>
                    <li onclick="select('SEO-специалист')">
                      <label>SEO-специалист</label>
                    </li>
                    <li onclick="select('Графический дизайнер')">
                      <label>Графический дизайнер</label>
                    </li>
                    <li onclick="select('Системный администратор')">
                      <label>Системный администратор</label>
                    </li>
                    <li onclick="select('Администратор БД')">
                      <label>Администратор БД</label>
                    </li>
                    <li onclick="select('HR')"><label>HR</label></li>
                    <li onclick="select('Frontend')">
                      <label>Frontend</label>
                    </li>
                    <li onclick="select('Менеджер продаж')">
                      <label>Менеджер продаж</label>
                    </li>
                    <li onclick="select('Тестировщик')">
                      <label>Тестировщик</label>
                    </li>
                    <li onclick="select('Продукт менеджер')">
                      <label>Продукт менеджер</label>
                    </li>
                    <li onclick="select('Backend')"><label>Backend</label></li>
                    <li onclick="select('FullStack')">
                      <label>FullStack</label>
                    </li>
                    <li onclick="select('TeamLeader')">
                      <label>TeamLeader</label>
                    </li>
                    <li onclick="select('Верстальщик')">
                      <label>Верстальщик</label>
                    </li>
                    <li onclick="select('Инфобез-специалист')">
                      <label>Инфобез-специалист</label>
                    </li>
                    <li onclick="select('Веб-дизайнер')">
                      <label>Веб-дизайнер</label>
                    </li>
                    <li onclick="select('Маркетолог')">
                      <label>Маркетолог</label>
                    </li>
                    <li onclick="select('Копирайтер')">
                      <label>Копирайтер</label>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
            <div class="softsSkills">
              <div class="downloadSkills">
                <h1>Навыки</h1>
                <div class="downSkill">
                  <svg
                    width="17"
                    height="17"
                    viewBox="0 0 17 17"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <rect width="17" height="17" rx="2" fill="#5412E0" />
                    <path d="M3 7L9 13L15 7" stroke="white" stroke-width="2" />
                    <path d="M9 2L9 12" stroke="white" stroke-width="2" />
                  </svg>
                </div>
              </div>
              <div class="searchSpecialist">
                <div class="inpSkills">
                  <input
                    type="text"
                    placeholder="Webpack"
                    id="skills"
                    class="descrtopSearchDesctop"
                  />
                  <div class="downSkill downSkillMob">
                    <svg
                      style="width: 100%; height: 100%"
                      width="36"
                      height="37"
                      viewBox="0 0 36 37"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M0.824463 3.02086C0.824463 1.49656 2.06016 0.260864 3.58446 0.260864H33.24C34.7643 0.260864 36 1.49656 36 3.02086V33.5009C36 35.0252 34.7643 36.2609 33.24 36.2609H3.58446C2.06016 36.2609 0.824463 35.0252 0.824463 33.5009V3.02086Z"
                        fill="#4900E3"
                      />
                      <path
                        d="M12.5496 17.2609L18.4122 23.2609L24.2748 17.2609"
                        stroke="white"
                        stroke-width="2"
                      />
                      <path
                        d="M18.4121 12.2609L18.4121 22.2609"
                        stroke="white"
                        stroke-width="2"
                      />
                    </svg>
                  </div>
                </div>
                
              </div>
              <div class="selectedSkills">
                <span class="addad">Добавленные</span>
                <div class="listAddadSkills">
                </div>
              </div>
            </div>
            <div class="specialisationSelect">
              <h1>Город</h1>
              <div class="searchSpecialist">
                <input
                  type="text"
                  placeholder="Абакан"
                  class="descrtopSearchDesctop"
                  id="searchCity"
                />
              
              </div>
            </div>
            <div class="specialisationSelect">
              <h1>Опыт работы</h1>
              <div class="NoWrapExirient wrapNo">
                <div class="elemExpiriens w24">
                  <input
                    type="radio"
                    id="OneTwo"
                    name="radioExpiriens"
                    value="OneTwo"
                    onclick="selectExpiriens('0-2')"

                  />
                  <label class="elemExpiriensLabel nun" for="OneTwo">0-2</label>
                </div>

                <div class="elemExpiriens w24">
                  <input
                    onclick="selectExpiriens('3-5')"
                    type="radio"
                    id="ThreeFour"
                    name="radioExpiriens"
                    value="ThreeFour"
                  />
                  <label class="elemExpiriensLabel nun" for="ThreeFour"
                    >3-5</label
                  >
                </div>

                <div class="elemExpiriens w24">
                  <input
                    type="radio"
                    id="SixEight"
                    name="radioExpiriens"
                    value="SixEight"
                    onclick="selectExpiriens('6-8')"
                  />
                  <label class="elemExpiriensLabel nun" for="SixEight"
                    >6-8</label
                  >
                </div>

                <div class="elemExpiriens w24">
                  <input
                    type="radio"
                    id="EightPlus"
                    onclick="selectExpiriens('8')"
                    name="radioExpiriens"
                    value="EightPlus"
                  />
                  <label class="elemExpiriensLabel nun" for="EightPlus"
                    >8+</label
                  >
                </div>
              </div>
            </div>
            <div class="resetAndSend">
              <a type="reset" class="resetForm" href="/specialists">Сбросить</a>
              <a type="submit" class="sendForm" href="/specialists">Применить фильтр</a>
            </div>
          </div>
        </div>
        <div class="MoreInfo">
          <div class="append">

          <% users.forEach((user,index) => { %>
          <article
          data-last="<%-index === users.length - 1?true:false%>"
          
            class="<%= user.isPremium ?'premiumUser ':'' %> personArticle"
          >
            <div class="topInfoSpec">
              <div class="leftTopInfoSpec">
                <div class="imgProfile">
                  <img
                    width="104"
                    height="104"
                    src="<%=  user.avatar?user.avatar:user.isPremium?'/assets/pictures/ПремиумС.jpg':'/assets/pictures/ДефолтСпециалист.jpg' %>"
                    alt="Фото <%=user.surname%> <%=user.name%>"
                  />
                </div>
              </div>
              <div class="rightTopInfoSpec">
                <div class="flexBeetwin">
                  <div class="rigthTop">
                    <div class="leftleft">
                      <a
                        href="/<%=user.id%>"
                        title="<%=user.surname%> <%=user.name%>"
                        data-username="<%=user.surname%> <%=user.name%>"
                        ><span class="userLFName"
                          ><%=user.surname%> <%=user.name%></span
                        ></a
                      >
                      <div class="specialnost">
                        <span class="specialnostText"
                          ><%=user.job||"Работа не определена"%></span
                        >
                      </div>
                    </div>
                  </div>

                  <div class="rightright">
                    <%if(id !== user.id) {%>
                    <button
                    id="addToFavorites"
                    class="inFavoritePerson textMy beActive inFav <%-user.isFavorite?'addingFavorite':''%>"
                    data-id='<%-user.id%>'
                    >
                    В избранное
                    </button>
                    <a href="/send-message?id=<%-user.id%>" class="inFavoritePerson textMy typing"
                      >Написать</a
                      >
                    <%}%>
                  </div>
                </div>
                <div class="bottomRight">
                  <%if(user.expiriens[0]) {%>
                  <div class="expitiens">
                    <% 
const totalExperience = user.expiriens.reduce((sum, item) => { 
    const experience = Number(item.date); 
    return sum + (item.typeData === "m" ? experience / 12 : experience); 
}, 0);

// Разделяем годы и месяцы
const years = Math.floor(totalExperience);
const months = Math.round((totalExperience - years) * 12);

// Функция для склонения
function getDeclension(value, words) {
    const absValue = Math.abs(value) % 100;
    const lastDigit = absValue % 10;

    if (absValue > 10 && absValue < 20) return words[2];
    if (lastDigit === 1) return words[0];
    if (lastDigit > 1 && lastDigit < 5) return words[1];
    return words[2];
}

// Слова для склонения
const yearsWord = getDeclension(years, ['год', 'года', 'лет']);
const monthsWord = getDeclension(months, ['месяц', 'месяца', 'месяцев']);

// Формируем итоговый вывод
let experienceText = '';
if (years > 0) experienceText += `${years} ${yearsWord}`;
if (months > 0) experienceText += `${years > 0 ? ' и ' : ''}${months} ${monthsWord}`;
%>

                    <span
                      >Опыт
                      <b style="font-weight: 700"
                        ><%=experienceText%></b
                      ></span
                    >
                  </div>
                  <%}%>
                  <div class="cityPerson">
                    <div class="point">
                      <svg
                        class="point"
                        width="11"
                        height="15"
                        viewBox="0 0 11 15"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg"
                      >
                        <path
                          fill-rule="evenodd"
                          clip-rule="evenodd"
                          d="M5.5 0C8.53757 0 11 2.26228 11 5.05312C11 9.61016 5.5 14.4375 5.5 14.4375C5.5 14.4375 0 9.65067 0 5.05312C0 2.26228 2.46243 0 5.5 0Z"
                          fill="#5412E0"
                        />
                        <path
                          d="M5.5 8.25003C7.01878 8.25003 8.25 7.01881 8.25 5.50003C8.25 3.98125 7.01878 2.75003 5.5 2.75003C3.98122 2.75003 2.75 3.98125 2.75 5.50003C2.75 7.01881 3.98122 8.25003 5.5 8.25003Z"
                          fill="white"
                        />
                      </svg>
                    </div>
                    <p title="<%=user.city%>">
                      <%=user.city||"Локация не указана"%>
                    </p>
                  </div>
                </div>
              </div>
            </div>
            <%if(user?.description.length) {%>
            <div class="middleInfoVacansya noMob">
              <div class="descriptionVacansy">
                <p class="descriptionVacansyText"><%= user.description %></p>
              </div>

              <div class="showFull">
                <span class="showFullText">Показать полностью</span>
              </div>
            </div>
            <%}%> <%if(user.skills) {%>
            <div class="bottomInfoSpec">
              <ul class="listStacks" style="margin-left: -8px">
                <% user.skills.forEach(skill => { %>
                <li class="abilityItem">
                  <h5 class="ability"><%=skill.title%></h5>
                </li>
                <% }); %>
              </ul>
            </div>
            <%}%>
            <div class="rightright mobrightright">
                    <%if(id !== user.id) {%>

                                <button type="button" class="Infavorites defaultButton inFav <%-user.isFavorite?'addingFavorite':''%>" data-id='<%-user.userID%>'>

                В избранное
              </button>
              <a href="/send-message?id=<%-user.id%>" class="inFavoritePerson textMy typing">Написать</a>
              <%}%>
            </div>
          </article>
          <%});%>
          </div>

          <div class="showMore">
            <button
              id="getMore"
              class="showMoreButton"
              title="Смотреть еще специалистов"
            >
              Смотреть еще специалистов
            </button>
          </div>
        </div>
      </div>
    </main>

    <%- include('./footer.ejs') %>
    <script src="/js/header.js"></script>
    <script src="/js/SearchSpecialization.js"></script>
  </body>
</html>
