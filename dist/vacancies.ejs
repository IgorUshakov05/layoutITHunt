<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Найдите работу или предложите её в IT-сфере с помощью нашего сайта. Мы предлагаем широкий выбор вакансий для различных специализаций."
    />
    <meta
      name="keywords"
      content="IT, работа, вакансии, поиск работы, WebHunt, специалисты, программист, разработчик, тестировщик, веб-дизайнер"
    />
    <meta name="robots" content="index, follow" />
    <link rel="shortcut icon" href="/assets/icon.svg" type="image/x-icon" />
    <meta name="author" content="WebHunt" />
    <link rel="stylesheet" href="/style.css" />
    <script src="/js/jquery.js"></script>
    <title>WebHunt - Вакансии</title>
  </head>
  <body>
    <%- include('./header.ejs', { isLoggedIn, active:
    'vacancies',chat:chatList}) %> <%const specialList = [ "Аналитик",
    "SEO-специалист", "Графический дизайнер", "Системный администратор",
    "Администратор БД", "HR", "Frontend", "Менеджер продаж", "Тестировщик",
    "Продукт менеджер", "Backend", "FullStack", "TeamLeader", "Верстальщик",
    "Инфобез-специалист", "Веб-дизайнер", "Маркетолог", "Копирайтер", ];%>
    <main class="main">
      <div class="twoBlocks">
        <div noindex class="personalInfo filterAlways">
          <div class="openFilter">
            <div class="picFilter">
              <svg
                width="20"
                height="16"
                viewBox="0 0 20 16"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M1 2.37622H19.2179"
                  stroke="black"
                  stroke-width="0.554457"
                  stroke-linecap="round"
                />
                <circle cx="12.8811" cy="2.37624" r="2.37624" fill="#5412E0" />
                <path
                  d="M1 13.4655H19.2179"
                  stroke="black"
                  stroke-width="0.554457"
                  stroke-linecap="round"
                />
                <circle cx="12.8811" cy="13.6237" r="2.37624" fill="#5412E0" />
                <path
                  d="M19.2178 7.9209L0.999909 7.9209"
                  stroke="black"
                  stroke-width="0.554457"
                  stroke-linecap="round"
                />
                <circle
                  cx="5.75242"
                  cy="8.0792"
                  r="2.37624"
                  transform="rotate(-180 5.75242 8.0792)"
                  fill="#5412E0"
                />
              </svg>
            </div>
            <p style="margin-left: 10px; font-size: 13px; margin-bottom: 2px">
              Закрыть фильтр
            </p>
          </div>
          <div class="filt">
            <div class="specialisationSelect FirsSpec">
              <h1>Специализация</h1>
              <div class="searchSpecialist">
                <div
                  id="selectedSpecialList"
                  style="
                    display: none;
                    gap: 5px;
                    margin-bottom: 10px;
                    flex-wrap: wrap;
                  "
                ></div>

                <input
                  type="text"
                  placeholder="Frontend"
                  class="descrtopSearchDesctop"
                  id="special"
                />
                <ul
                  class="optionsSelectSpec specialList"
                  style="display: none; z-index: 3"
                >
                  <%specialList.forEach((item) => {%>
                  <li
                    class="optionsSelectSpecItem specialItem"
                    data-title="<%-item%>"
                  >
                    <p class="titleSearch"><%-item%></p>
                    <p class="selectSearch">Выбрать</p>
                  </li>
                  <%})%>
                </ul>
              </div>
            </div>
            <div class="wayWorkRoole">
              <h1>Способ работы</h1>
              <div class="wayWork">
                <div class="wayWorkItem">
                  <input
                    type="checkbox"
                    id="distant"
                    name="workWay"
                    value="Удаленная"
                  />
                  <label class="titleWork" for="distant">Удаленная</label>
                </div>

                <div class="wayWorkItem">
                  <input
                    type="checkbox"
                    id="fullday"
                    name="workWay"
                    value="Полный день"
                  />
                  <label class="titleWork" for="fullday">Полный день</label>
                </div>

                <div class="wayWorkItem">
                  <input
                    type="checkbox"
                    id="partTime"
                    name="workWay"
                    value="Частичная работа"
                  />
                  <label class="titleWork" for="partTime"
                    >Частичная работа</label
                  >
                </div>

                <div class="wayWorkItem">
                  <input
                    type="checkbox"
                    id="office"
                    name="workWay"
                    value="Офисная"
                  />
                  <label class="titleWork" for="office">Офисная</label>
                </div>
                <div class="wayWorkItem">
                  <input
                    type="checkbox"
                    id="flexeble"
                    name="workWay"
                    value="Гибкий график"
                  />
                  <label class="titleWork" for="flexeble">Гибкий график</label>
                </div>
                <div class="wayWorkItem">
                  <input
                    type="checkbox"
                    id="shift"
                    name="workWay"
                    value="Сменный график"
                  />
                  <label class="titleWork" for="shift">Сменный график</label>
                </div>
              </div>
            </div>
            <div class="softsSkills">
              <div class="downloadSkills">
                <h1>Навыки</h1>
                <%if (id) {%>
                <div class="downSkill">
                  <svg
                    width="17"
                    height="17"
                    viewBox="0 0 17 17"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <rect width="17" height="17" rx="2" fill="#5412E0" />
                    <path d="M3 7L9 13L15 7" stroke="white" stroke-width="2" />
                    <path d="M9 2L9 12" stroke="white" stroke-width="2" />
                  </svg>
                </div>
                <%}%>
              </div>
              <div class="searchSpecialist">
                <div class="inpSkills">
                  <input
                    type="text"
                    placeholder="Webpack"
                    id="skillInput"
                    class="descrtopSearchDesctop"
                  />
                  <div class="downSkill downSkillMob">
                    <svg
                      style="width: 100%; height: 100%"
                      width="36"
                      height="37"
                      viewBox="0 0 36 37"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        d="M0.824463 3.02086C0.824463 1.49656 2.06016 0.260864 3.58446 0.260864H33.24C34.7643 0.260864 36 1.49656 36 3.02086V33.5009C36 35.0252 34.7643 36.2609 33.24 36.2609H3.58446C2.06016 36.2609 0.824463 35.0252 0.824463 33.5009V3.02086Z"
                        fill="#4900E3"
                      />
                      <path
                        d="M12.5496 17.2609L18.4122 23.2609L24.2748 17.2609"
                        stroke="white"
                        stroke-width="2"
                      />
                      <path
                        d="M18.4121 12.2609L18.4121 22.2609"
                        stroke="white"
                        stroke-width="2"
                      />
                    </svg>
                  </div>
                </div>
                <ul
                  class="optionsSelectSpec listFindSkills"
                  style="display: none; z-index: 2"
                ></ul>
              </div>
              <div class="selectedSkills">
                <span class="addad">Добавленные</span>
                <div class="listAddadSkills"></div>
              </div>
            </div>
            <div class="specialisationSelect">
              <h1>Город</h1>
              <div class="searchSpecialist">
                <div
                  id="selectedCity"
                  style="
                    display: none;
                    gap: 5px;
                    margin-bottom: 10px;
                    flex-wrap: wrap;
                  "
                ></div>

                <input
                  type="text"
                  placeholder="Россия, Абакан"
                  class="descrtopSearchDesctop"
                  id="searchCity"
                />
                <ul
                  class="optionsSelectSpec"
                  id="ListSearchCity"
                  style="display: none"
                ></ul>
              </div>
            </div>
            <div class="specialisationSelect">
              <h1>Опыт работы</h1>
              <div class="wayWork vac">
                <div class="wayWorkItem">
                  <input
                    type="checkbox"
                    id="distant"
                    onclick="selectTime(this)"
                    name="exp"
                    value="OneTwo"
                  />
                  <label class="titleWork" for="distant">0-2</label>
                </div>

                <div class="wayWorkItem">
                  <input
                    type="checkbox"
                    id="fullday"
                    name="exp"
                    onclick="selectTime(this)"
                    value="ThreeFour"
                  />
                  <label class="titleWork" for="fullday">3-5</label>
                </div>

                <div class="wayWorkItem">
                  <input
                    type="checkbox"
                    id="partTime"
                    name="exp"
                    onclick="selectTime(this)"
                    value="SixEight"
                  />
                  <label class="titleWork" for="partTime">6-8</label>
                </div>

                <div class="wayWorkItem">
                  <input
                    type="checkbox"
                    id="office"
                    name="exp"
                    onclick="selectTime(this)"
                    value="EightPlus"
                  />
                  <label class="titleWork" for="office">8+</label>
                </div>
              </div>
            </div>
            <div class="specialisationSelect">
              <div class="zp">
                <h1>Зарплата</h1>
                <h1 class="itemP">Ꝑ</h1>
              </div>
              <div class="toForT">
                <input
                  class="descrtopSearchDesctop priceTo"
                  placeholder="от"
                  type="number"
                  name="min"
                  id="min"
                /><input
                  class="descrtopSearchDesctop priceDo"
                  type="number"
                  placeholder="до"
                  name="max"
                  id="max"
                />
              </div>
            </div>
            <div class="resetAndSend">
              <a type="reset" class="resetForm" href="vacancies">Сбросить</a>
              <a type="submit" class="sendForm" id="send" href="vacancies"
                >Применить фильтр</a
              >
            </div>
          </div>
        </div>
        <div class="MoreInfo">
          <div class="listVacas">
            <%if(vacancies) {%> <%vacancies.forEach((vacancy,index) =>{ %>

            <article
              class="vakansiaItem"
              data-last="<%-index === vacancies.length-1?'true':''%>"
            >
              <%let userItem =users.find(user => user.id ===vacancy.userID) %>
              <%let companyItem = company.find((item) =>
              item.userList.some(userListItem => userListItem.userID ===
              userItem.id));%>
              <div class="topInfoPriceAndTitle">
                <div class="titleAndTypeJob">
                  <h2>
                    <span
                      ><a href="/vacancia/<%-vacancy.id%>" class="titleJob"
                        ><%-vacancy.special%></a
                      ></span
                    >
                  </h2>
                  <h4
                    style="margin-top: 5px; display: flex; align-items: center"
                  >
                    <svg
                      class="methodJob"
                      width="14"
                      height="19"
                      viewBox="0 0 14 19"
                      fill="none"
                      xmlns="http://www.w3.org/2000/svg"
                    >
                      <path
                        fill-rule="evenodd"
                        clip-rule="evenodd"
                        d="M7 0C10.866 0 14 2.87926 14 6.43125C14 12.2311 7 18.375 7 18.375C7 18.375 0 12.2827 0 6.43125C0 2.87926 3.134 0 7 0Z"
                        fill="#5412E0"
                      />
                      <path
                        d="M7 10.5C8.933 10.5 10.5 8.93303 10.5 7.00003C10.5 5.06703 8.933 3.50003 7 3.50003C5.067 3.50003 3.5 5.06703 3.5 7.00003C3.5 8.93303 5.067 10.5 7 10.5Z"
                        fill="white"
                      />
                    </svg>
                    <span
                      style="margin-left: 5px"
                      class="methodJob"
                      title="Работадатель из <%-userItem.city%>"
                    >
                      <%vacancy.typeWork.forEach((item,index) => {%>
                      <%-`${item.title} ${index+1 ==
                      vacancy.typeWork.length?'':', '} `%> <%})%>
                    </span>
                  </h4>
                </div>
                <div class="priceJob">
                  <h3>
                    <%if(vacancy.price.agreement) {%>
                    <span class=""> Договорная</span>
                    <%}else {%> <% if (vacancy.price.maxPrice) { %>
                    <span class="priceItem">
                      до <%= vacancy.price.maxPrice.toLocaleString("no-NO") %>
                    </span>
                    <span class="p">Ꝑ</span>
                    <% } else if (vacancy.price.minPrice) { %>
                    <span class="priceItem">
                      от <%= vacancy.price.minPrice.toLocaleString("no-NO") %>
                    </span>
                    <span class="p">Ꝑ</span>
                    <% } %> <%}%>
                  </h3>
                </div>
              </div>
              <%if(vacancy.description.length) {%>
              <div class="middleInfoVacansya">
                <div class="descriptionVacansy">
                  <p class="descriptionVacansyText"><%-vacancy.description%></p>
                </div>
                <div class="showFull">
                  <span class="showFullText">Показать полностью</span>
                </div>
              </div>
              <%}%> <%if(vacancy.skills) {%>
              <div class="stackForJob">
                <ul class="listStacks">
                  <%vacancy.skills.forEach(skill =>{ %>
                  <li class="abilityItem">
                    <h5 class="ability"><%-skill.title%></h5>
                  </li>
                  <% })%>
                </ul>
              </div>
              <%}%>

              <div class="bottomInfo">
                <a
                  href="/<%-companyItem?`company/${companyItem.INN}`:userItem.id%>"
                >
                  <div class="companyInfo">
                    <div class="img">
                      <img
                        width="40"
                        height="40"
                        alt="Логотип компании"
                        src="<%- (companyItem ? companyItem.avatar : userItem.avatar?'/assets/pictures/ПремиумРаботодатель.jpg':'/assets/pictures/ДефолтРаботодатель.jpg') %>
"
                      />
                    </div>
                    <div class="titleCompanyAndDate">
                      <div class="titleCompany">
                        <span class="styleTitleCompany">
                          <%- (companyItem ? companyItem.title : userItem.name +
                          ' ' +userItem.surname ) %>
                        </span>
                      </div>
                      <div class="titleCompany">
                        <span class="styleTimeCompany">35 часов назад</span>
                      </div>
                    </div>
                  </div>
                </a>
                <div class="buttonsElements">
                  <!-- addingFavorite - класс добавленого в избранное -->
                  <button
                    class="Infavorites <%-favorites.some(item => item.id === vacancy.id)?'addingFavorite':''%>"
                  >
                    В избранное
                  </button>
                  <button class="Respond">
                    <a href="/vacancia/<%-vacancy.id%>">Откликнуться</a>
                  </button>
                </div>
              </div>
            </article>
            <%})%> <%}%>
          </div>
          <div class="showMore">
            <button
              id="getMore"
              class="showMoreButton"
              title="Загрузить больше вакансий"
            >
              Смотреть еще вакансии
            </button>
          </div>
        </div>
      </div>
    </main>

    <%- include('./footer.ejs') %>
    <script src="/js/header.js"></script>
    <script src="/js/vacancies.js"></script>
  </body>
</html>
